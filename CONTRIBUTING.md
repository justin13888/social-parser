# Contributing

Contributions are always welcomed! Start by forking the repository and making a PR when follow. Sharing bugs and making feature requests are also appreciated.

Note: All PRs must pass CI/CD and have the necessary unit tests.

## Getting Started

To get started, fork the repository and clone it to your local machine.

Install the following prerequisites:

- Rust
- Python 3.10+
- Node.js

Then follow the instructions below for each binding.

### For Rust

The actual source code is located in the `crates/social-parser` directory. See `examples/rust` for examples on how to use the library.

#### Publishing to crates.io

See this link <https://doc.rust-lang.org/cargo/reference/publishing.html>

### For Python Bindings

Python bindings are generated using [PyO3](https://github.com/PyO3/pyo3). Before starting, activate a virtualenv (e.g. with pyenv or anaconda) and run `pip install maturin` to install the necessary dependencies.

For more details on how and why, see the [PyO3 documentation](https://pyo3.rs/v0.22.2/getting-started).

While your virtualenv is active, use `maturin develop` to make the Python bindings importable in that environment.

Here are other useful commands:

- Build wheel: `maturin build`
- Publish to PyPI: `maturin publish`

### For TypeScript Bindings

TypeScript bindings are generated using [Neon](https://github.com/neon-bindings/neon). Before starting run `npm install` to install the necessary dependencies.

The relevant commands are:

- Build: `npm run build`
- Debug: `npm run debug`
- Test: `npm run test`
- Cross-compile: `npm run cross`
  - This uses [cross-rs](https://github.com/cross-rs/cross) to cross-compile for another platform. Use the [`CARGO_BUILD_TARGET`](https://doc.rust-lang.org/cargo/reference/config.html#buildtarget) environment variable to select the build target.
- Run new release: `npm run release`
- Dry run: `npm run dryrun`

### Project Layout

The directory structure of this project is:

```
social-parser/
├── Cargo.toml
├── examples/
├── README.md
├── lib/
├── src/
|   ├── index.mts
|   └── index.cts
├── crates/
|   └── social-parser/
|       └── src/
|           └── lib.rs
├── platforms/
├── package.json
└── target/
```

| Entry          | Purpose                                                                                                                                  |
|----------------|------------------------------------------------------------------------------------------------------------------------------------------|
| `Cargo.toml`   | The Cargo [manifest file](https://doc.rust-lang.org/cargo/reference/manifest.html), which informs the `cargo` command.                   |
| `examples/`    | The directory containing example code for the library.                                                                                 |
| `README.md`    | This file.                                                                                                                               |
| `lib/`         | The directory containing the generated output from [tsc](https://typescriptlang.org).                                                    |
| `src/`         | The directory containing the TypeScript source files.                                                                                    |
| `index.mts`    | Entry point for when this library is loaded via [ESM `import`](https://nodejs.org/api/esm.html#modules-ecmascript-modules) syntax.       |
| `index.cts`    | Entry point for when this library is loaded via [CJS `require`](https://nodejs.org/api/modules.html#requireid).                          |
| `crates/`      | The directory tree containing the Rust source code for the project.                                                                      |
| `lib.rs`       | Entry point for the Rust source code.                                                                                                          |
| `platforms/`   | The directory containing distributions of the binary addon backend for each platform supported by this library.                          |
| `package.json` | The npm [manifest file](https://docs.npmjs.com/cli/v7/configuring-npm/package-json), which informs the `npm` command.                    |
| `target/`      | Binary artifacts generated by the Rust build.                                                                                            |
